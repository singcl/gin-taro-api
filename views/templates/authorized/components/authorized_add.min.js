import{h,reactive,ref,toRef}from"/views/static/js/vue/vue3.esm-browser.js";import naive from"/views/static/js/vue/naive.js";import Kiko from"/views/static/js/utils/kiko/Kiko.js";const{NModal,NCard,NForm,NFormItem,NInput,useMessage}=naive;export default{props:{visible:Boolean},emits:["update:visible","kiko:conform"],setup(e,s){const t=useMessage(),i=toRef(e,"visible"),r=reactive({business_key:void 0,business_developer:void 0,remark:void 0}),a=ref(null),o=reactive({business_key:{required:!0,trigger:"blur",message:"请输入调用方标识"},business_developer:{required:!0,trigger:"blur",message:"请输入调用方对接人"},remark:{required:!0,trigger:"blur",message:"备注"}});async function l(){var e=await a.value?.validate();try{await(new Kiko).fetch("/api/authorized",{method:"POST",body:r}),t.success("创建成功"),u(),s.emit("kiko:conform",e)}catch(e){t.error(`创建失败:code: ${e.code};message: `+e.message)}}const u=()=>{s.emit("update:visible",!1)};return()=>h(NModal,{show:i.value,title:"新增授权",preset:"dialog",content:()=>h(NCard,()=>h(NForm,{model:r,rules:o,ref:a,labelPlacement:"left",labelWidth:"120px"},()=>[h(NFormItem,{label:"调用方",path:"business_key"},()=>h(NInput,{value:r.business_key,"onUpdate:value":e=>r.business_key=e,type:"text",placeholder:"请输入调用方标识"})),h(NFormItem,{label:"调用方对接人",path:"business_developer"},()=>h(NInput,{value:r.business_developer,"onUpdate:value":e=>r.business_developer=e,type:"text",placeholder:"请输入调用方对接人"})),h(NFormItem,{label:"备注",path:"remark"},()=>h(NInput,{value:r.remark,"onUpdate:value":e=>r.remark=e,type:"text",placeholder:"请输入备注"}))])),positiveText:"确认",negativeText:"取消",onNegativeClick:u,onPositiveClick:l,style:{width:"900px"}})}};