import{h,ref,reactive,defineComponent}from"vue";import naive from"naive";import Kiko from"kiko";import EyeOutline from"@vicons/ionicons5/EyeOutline.js";import EyeOffOutline from"@vicons/ionicons5/EyeOffOutline.js";import WeChat from"@vicons/ionicons5/WeChat.js";export default defineComponent((e,{emit:t})=>{const l=naive.useMessage(),o=naive.useNotification(),i=ref("admin");const s=ref(""),n=reactive({username:!1,password:!1}),r=ref(!0);function a(e,t){n[e]=t}async function f(){try{var e=await(new Kiko).fetch("/api/login",{method:"POST",body:{username:i.value,password:s.value}}),t=e&&e.token;t&&localStorage.setItem(Kiko.getTokenName(),t),location.href="/"}catch(e){const l=e.code,n=e.message;o.error({title:"错误信息",content:()=>h("div",[h("p",[l]),h("p",[n])]),duration:2500,keepAliveOnHover:!0})}}function u(){l.info("紧锣密鼓开发中...")}function c(){l.info("紧锣密鼓开发中...")}function d(){t("change","wechat")}return()=>[h("h3",{class:"self-start pt-4 mb-2 text-2xl"},["欢迎使用GIN-TARO-API"]),h("div",{class:"w-full flex overflow-hidden flex-col text-sm"},[h("div",{class:"relative flex flex-none items-center"},[h("div",{class:"relative flex flex-auto grow"},[h("div",{class:"relative flex pt-2 pb-2"},[h("div",{class:"text-green-600 after:absolute after:w-full after:h-[2px] after:left-0 after:bottom-0 after:bg-green-600"},["邮箱"])])])]),h("div",{class:"flex-auto"},[h("div",{class:"w-full flex-none outline-none pt-4 pb-4"},[h("div",{class:"mb-4 flex flex-row flex-wrap"},[h("div",{class:"flex w-full"},[h("span",{class:"login-field "+(n.username?"login-field-focused":"")},[h("input",{class:"inline-block w-full p-0 outline-0 border-0",name:"username",type:"text",value:i.value,placeholder:"请输入用户名",onInput:e=>{e=e.target.value,i.value=e},onFocus:()=>{a("username",!0)},onBlur:()=>{a("username",!1)}})])])]),h("div",{class:"mb-4 flex flex-row flex-wrap"},[h("div",{class:"flex w-full"},[h("span",{class:"login-field "+(n.password?"login-field-focused":"")},[h("input",{class:"inline-block w-full p-0 outline-0 border-0",name:"password",type:r.value?"password":"text",value:s.value,placeholder:"请输入密码",onInput:e=>{e=e.target.value,s.value=e},onFocus:()=>{a("password",!0)},onBlur:()=>{a("password",!1)}}),h(naive.NIcon,{size:18},()=>h("span",{class:"cursor-pointer text-slate-500",onClick:()=>r.value=!r.value},[r.value?h(EyeOffOutline):h(EyeOutline)]))])])]),h("div",{class:"w-full"},[h("button",{class:"w-full inline-flex justify-center items-center mb-2 bg-green-600 hover:bg-green-700 text-white pt-2 pb-2 pl-4 pr-4 rounded outline-0 text-base",onClick:f},"登录")]),h("div",{class:"flex justify-between items-center"},[h("button",{class:"inline-flex text-green-600 rounded outline-0 h-8 justify-center items-center",onClick:u},"验证码登陆/注册"),h("button",{class:"inline-flex text-green-600 rounded outline-0 h-8 justify-center items-center",onClick:c},"忘记密码")])])])]),h("div",{class:"w-full flex flex-col pt-4 mt-0 border-solid border-t border-slate-200"},[h("div",{class:"py-2"},[h("button",{class:"w-full inline-flex justify-center items-center py-2 text-green-600 rounded outline-0 text-base border-solid border-slate-100 border hover:border-green-600",onClick:d},[h(naive.NIcon,{size:24,class:"mr-1"},()=>h(WeChat)),"微信登陆"])])])]});